{% extends 'bills/Base.html' %}
{% load crispy_forms_tags %}
{% block delivery_challan %}



<div class="container">
    
    <div class="row alert alertbg mt-2 text-center">
        <div class="col-sm-1"><a href="{% url 'customer_dashboard' id %}" class="btn btn-primary mt-2" ><i class="bi bi-house-door"></i> Home</a></div>
        <div class="col-sm-10 mt-2"><h4 class="">Generate Delivery Challan</h4></div>
      <div class="col-sm-1"></div>
      </div>
      
    <form action="" method="post">{% csrf_token %}
    <h6 class="form_heading mt-2" >Customer Details</h6>
    <div class="row">
        <div class="col-sm-6">{{fm.cust_name|as_crispy_field}}</div>
        <div class="col-sm-6">{{fm.cust_mobile|as_crispy_field}}</div>
    </div>
    <div class="row">
        <div class="col-sm-4">{{fm.cust_village|as_crispy_field}}</div>
        <div class="col-sm-4">{{fm.cust_taluka|as_crispy_field}}</div>
        <div class="col-sm-4">{{fm.cust_dist|as_crispy_field}}</div>
    </div>

    <h6 class="form_heading mt-2" >Genaral Info</h6>
    <div class="row">
        <div class="col-sm-6">{{fm.del_num|as_crispy_field}}</div>
        <div class="col-sm-6">{{fm.del_date|as_crispy_field}} {{fm.del_amt_in_word.as_hidden}}</div>

    </div>

    <h6 class="form_heading mt-2" >Description Section</h6>
    <div class="row">
        <div class="col-sm-4">{{fm.del_descrtiption1|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_chessis1|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_engine1|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_qty1|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_amount1|as_crispy_field}}</div>
    </div>

    <div class="row">
        <div class="col-sm-4">{{fm.del_descrtiption2|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_chessis2|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_engine2|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_qty2|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_amount2|as_crispy_field}}</div>
    </div>

    <div class="row">
        <div class="col-sm-4">{{fm.del_descrtiption3|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_chessis3|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_engine3|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_qty3|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_amount3|as_crispy_field}}</div>
    </div>

    <div class="row">
        <div class="col-sm-4">{{fm.del_descrtiption4|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_chessis4|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_engine4|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_qty4|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_amount4|as_crispy_field}}</div>
    </div>

    <div class="row">
        <div class="col-sm-4">{{fm.del_descrtiption5|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_chessis5|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_engine5|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_qty5|as_crispy_field}}</div>
        <div class="col-sm-2">{{fm.del_amount5|as_crispy_field}}</div>
    </div>

    <div class="row">
        <div class="col-sm-12">{{fm.del_total_amount|as_crispy_field}}</div>
    </div>

    <div class="row text-center">
        <div class="col-sm-12">
        <input type="submit" value="Generate Delivery Challan" class="btn btnbg px-5 py-2">
    </div>
    </div>
</form>
</div>



<script>
    function auto_calculations(value)
    {
    qty1=Number(document.getElementById('id_del_qty1').value);
    qty2=Number(document.getElementById('id_del_qty2').value);
    qty3=Number(document.getElementById('id_del_qty3').value);
    qty4=Number(document.getElementById('id_del_qty4').value);
    qty5=Number(document.getElementById('id_del_qty5').value);

    amt1=Number(document.getElementById('id_del_amount1').value);
    amt2=Number(document.getElementById('id_del_amount2').value);
    amt3=Number(document.getElementById('id_del_amount3').value);
    amt4=Number(document.getElementById('id_del_amount4').value);
    amt5=Number(document.getElementById('id_del_amount5').value);

    calculation_total=amt1+amt2+amt3+amt4+amt5;

    Number(document.getElementById('id_del_total_amount').value=calculation_total);

    }



    function ConvertNumberToWords(value) {
        value = Number(document.getElementById('id_del_total_amount').value);
            var words = new Array();
            words[0] = '';
            words[1] = 'One';
            words[2] = 'Two';
            words[3] = 'Three';
            words[4] = 'Four';
            words[5] = 'Five';
            words[6] = 'Six';
            words[7] = 'Seven';
            words[8] = 'Eight';
            words[9] = 'Nine';
            words[10] = 'Ten';
            words[11] = 'Eleven';
            words[12] = 'Twelve';
            words[13] = 'Thirteen';
            words[14] = 'Fourteen';
            words[15] = 'Fifteen';
            words[16] = 'Sixteen';
            words[17] = 'Seventeen';
            words[18] = 'Eighteen';
            words[19] = 'Nineteen';
            words[20] = 'Twenty';
            words[30] = 'Thirty';
            words[40] = 'Forty';
            words[50] = 'Fifty';
            words[60] = 'Sixty';
            words[70] = 'Seventy';
            words[80] = 'Eighty';
            words[90] = 'Ninety';
            number = value.toString();
            var atemp = number.split(".");
            var number = atemp[0].split(",").join("");
            var n_length = number.length;
            var words_string = "";
            if (n_length <= 9) {
                var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
                var received_n_array = new Array();
                for (var i = 0; i < n_length; i++) {
                    received_n_array[i] = number.substr(i, 1);
                }
                for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                    n_array[i] = received_n_array[j];
                }
                for (var i = 0, j = 1; i < 9; i++ , j++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        if (n_array[i] == 1) {
                            n_array[j] = 10 + parseInt(n_array[j]);
                            n_array[i] = 0;
                        }
                    }
                }
                value = "";
                for (var i = 0; i < 9; i++) {
                    if (i == 0 || i == 2 || i == 4 || i == 7) {
                        value = n_array[i] * 10;
                    } else {
                        value = n_array[i];
                    }
                    if (value != 0) {
                        words_string += words[value] + " ";
                    }
                    if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Crores ";
                    }
                    if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Lakhs ";
                    }
                    if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                        words_string += "Thousand ";
                    }
                    if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                        words_string += "Hundred and ";
                    } else if (i == 6 && value != 0) {
                        words_string += "Hundred ";
                    }
                }
                words_string = words_string.split("  ").join(" ");
            }
            document.getElementById('id_del_amt_in_word').value = words_string;
        }
</script>


<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script>
    {% for msg in messages %}
    swal("Done", "{{msg}}", "success");
  {% endfor %}
  </script>
  
{% endblock delivery_challan %}
