{% extends 'bills/Base.html' %}
{% load crispy_forms_tags %}
{% block quotation %}

<div class="container">
    
         
<div class="row alert alertbg mt-2 text-center">
  <div class="col-sm-1"><a href="{% url 'customer_dashboard' id %}" class="btn btn-primary mt-2" ><i class="bi bi-house-door"></i> Home</a></div>
  <div class="col-sm-10 mt-2"><h4 class="">Quotation</h4></div>
<div class="col-sm-1"></div>
</div>


    <form action="" method="post">{% csrf_token %}
        <h6 class="form_heading mt-2" >Customer Details</h6>
        <div class="row">
            <div class="col-sm-6">{{fm.cust_name|as_crispy_field}}</div>
            <div class="col-sm-6">{{fm.cust_mobile|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.cust_village|as_crispy_field}}</div>
            <div class="col-sm-4">{{fm.cust_taluka|as_crispy_field}}</div>
            <div class="col-sm-4">{{fm.cust_dist|as_crispy_field}}</div>
        </div>
    
        <h6 class="form_heading mt-2" >Basic Details</h6>
        <div class="row">
            <div class="col-sm-6">{{fm.qtn_no|as_crispy_field}}</div>
            <div class="col-sm-6">{{fm.qtn_date|as_crispy_field}} {{fm.qtn_amt_in_word.as_hidden}}</div>
        </div>

        <h6 class="form_heading mt-2" >Product Details</h6>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description1|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty1|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate1|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt1|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description2|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty2|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate2|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt2|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description3|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty3|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate3|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt3|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description4|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty4|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate4|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt4|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description5|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty5|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate5|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt5|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description6|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty6|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate6|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt6|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description7|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty7|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate7|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt7|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description8|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty8|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate8|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt8|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description9|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty9|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate9|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt9|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-4">{{fm.qtn_description10|as_crispy_field}}</div>
            <div class="col-sm-2">{{fm.qtn_qty10|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_rate10|as_crispy_field}}</div>
            <div class="col-sm-3">{{fm.qtn_amt10|as_crispy_field}}</div>
        </div>
        <div class="row">
            <div class="col-sm-12">{{fm.qtn_total_amount|as_crispy_field}}</div>
        </div>
        

        <div class="row text-center">
            <div class="col-sm-12">
            <input type="submit" value="Generate Quotation" class="btn btnbg px-5 py-2">
        </div>
        </div>
    </form>
        <hr>
</div>


<script>
    function auto_calculations(value)
    {
    qty1=Number(document.getElementById('id_qtn_qty1').value);
    qty2=Number(document.getElementById('id_qtn_qty2').value);
    qty3=Number(document.getElementById('id_qtn_qty3').value);
    qty4=Number(document.getElementById('id_qtn_qty4').value);
    qty5=Number(document.getElementById('id_qtn_qty5').value);
    qty6=Number(document.getElementById('id_qtn_qty6').value);
    qty7=Number(document.getElementById('id_qtn_qty7').value);
    qty8=Number(document.getElementById('id_qtn_qty8').value);
    qty9=Number(document.getElementById('id_qtn_qty9').value);
    qty10=Number(document.getElementById('id_qtn_qty10').value);

    rate1=Number(document.getElementById('id_qtn_rate1').value);
    rate2=Number(document.getElementById('id_qtn_rate2').value);
    rate3=Number(document.getElementById('id_qtn_rate3').value);
    rate4=Number(document.getElementById('id_qtn_rate4').value);
    rate5=Number(document.getElementById('id_qtn_rate5').value);
    rate6=Number(document.getElementById('id_qtn_rate6').value);
    rate7=Number(document.getElementById('id_qtn_rate7').value);
    rate8=Number(document.getElementById('id_qtn_rate8').value);
    rate9=Number(document.getElementById('id_qtn_rate9').value);
    rate10=Number(document.getElementById('id_qtn_rate10').value);

    cal_amt1=qty1*rate1;
    cal_amt2=qty2*rate2;
    cal_amt3=qty3*rate3;
    cal_amt4=qty4*rate4;
    cal_amt5=qty5*rate5;
    cal_amt6=qty6*rate6;
    cal_amt7=qty7*rate7;
    cal_amt8=qty8*rate8;
    cal_amt9=qty9*rate9;
    cal_amt10=qty10*rate10;
    
    amt1=Number(document.getElementById('id_qtn_amt1').value=cal_amt1);
    amt2=Number(document.getElementById('id_qtn_amt2').value=cal_amt2);
    amt3=Number(document.getElementById('id_qtn_amt3').value=cal_amt3);
    amt4=Number(document.getElementById('id_qtn_amt4').value=cal_amt4);
    amt5=Number(document.getElementById('id_qtn_amt5').value=cal_amt5);
    amt6=Number(document.getElementById('id_qtn_amt6').value=cal_amt6);
    amt7=Number(document.getElementById('id_qtn_amt7').value=cal_amt7);
    amt8=Number(document.getElementById('id_qtn_amt8').value=cal_amt8);
    amt9=Number(document.getElementById('id_qtn_amt9').value=cal_amt9);
    amt10=Number(document.getElementById('id_qtn_amt10').value=cal_amt10);

    calculation_total=cal_amt1+cal_amt2+cal_amt3+cal_amt4+cal_amt5+cal_amt6+cal_amt7+cal_amt8+cal_amt9+cal_amt10;
    
    Total=Number(document.getElementById('id_qtn_total_amount').value=calculation_total);
    }



    

function ConvertNumberToWords(value) {
    value = Number(document.getElementById('id_qtn_total_amount').value);
        var words = new Array();
        words[0] = '';
        words[1] = 'One';
        words[2] = 'Two';
        words[3] = 'Three';
        words[4] = 'Four';
        words[5] = 'Five';
        words[6] = 'Six';
        words[7] = 'Seven';
        words[8] = 'Eight';
        words[9] = 'Nine';
        words[10] = 'Ten';
        words[11] = 'Eleven';
        words[12] = 'Twelve';
        words[13] = 'Thirteen';
        words[14] = 'Fourteen';
        words[15] = 'Fifteen';
        words[16] = 'Sixteen';
        words[17] = 'Seventeen';
        words[18] = 'Eighteen';
        words[19] = 'Nineteen';
        words[20] = 'Twenty';
        words[30] = 'Thirty';
        words[40] = 'Forty';
        words[50] = 'Fifty';
        words[60] = 'Sixty';
        words[70] = 'Seventy';
        words[80] = 'Eighty';
        words[90] = 'Ninety';
        number = value.toString();
        var atemp = number.split(".");
        var number = atemp[0].split(",").join("");
        var n_length = number.length;
        var words_string = "";
        if (n_length <= 9) {
            var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
            var received_n_array = new Array();
            for (var i = 0; i < n_length; i++) {
                received_n_array[i] = number.substr(i, 1);
            }
            for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
                n_array[i] = received_n_array[j];
            }
            for (var i = 0, j = 1; i < 9; i++ , j++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    if (n_array[i] == 1) {
                        n_array[j] = 10 + parseInt(n_array[j]);
                        n_array[i] = 0;
                    }
                }
            }
            value = "";
            for (var i = 0; i < 9; i++) {
                if (i == 0 || i == 2 || i == 4 || i == 7) {
                    value = n_array[i] * 10;
                } else {
                    value = n_array[i];
                }
                if (value != 0) {
                    words_string += words[value] + " ";
                }
                if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Crores ";
                }
                if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Lakhs ";
                }
                if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                    words_string += "Thousand ";
                }
                if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                    words_string += "Hundred and ";
                } else if (i == 6 && value != 0) {
                    words_string += "Hundred ";
                }
            }
            words_string = words_string.split("  ").join(" ");
        }
        document.getElementById('id_qtn_amt_in_word').value = words_string;
    }
</script>



<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script>
    {% for msg in messages %}
    swal("Done", "{{msg}}", "success");
  {% endfor %}
  </script>
{% endblock quotation %}
